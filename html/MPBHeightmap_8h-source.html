<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MPBLibrary: MPBHeightmap.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>MPBHeightmap.h</h1><a href="MPBHeightmap_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="preprocessor">#ifndef __HEIGHTMAP_H__</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define __HEIGHTMAP_H__</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include "<a class="code" href="MPBVector_8h.html">MPBVector.h</a>"</span>
00005 
00006 <span class="keyword">class </span><a class="code" href="classPlane.html">Plane</a>;
00007 <span class="keyword">class </span><a class="code" href="classMPBAABB.html">MPBAABB</a>;
00008 <span class="keyword">class </span>PartitionTreeNode;
00009 <span class="keyword">class </span><a class="code" href="classMPBTriangleBinaryTreeNode.html">MPBTriangleBinaryTreeNode</a>;
00010 
<a name="l00011"></a><a class="code" href="classMPBHeightMap.html">00011</a> <span class="keyword">class </span><a class="code" href="classMPBHeightMap.html">MPBHeightMap</a>
00012 {
00013 <span class="keyword">public</span>:
00014 
00015         <a class="code" href="classMPBHeightMap.html#a0">MPBHeightMap</a>();
00016         <a class="code" href="classMPBHeightMap.html#a1">~MPBHeightMap</a>();
00017         <span class="keywordtype">void</span> <a class="code" href="classMPBHeightMap.html#a2">init</a>(      <span class="keyword">const</span> <span class="keywordtype">char</span>* heightMapFile, 
00018                                         <span class="keywordtype">char</span>* textureFile,
00019                                         <span class="keywordtype">double</span> scaleXZ,
00020                                         <span class="keywordtype">double</span> scaleY   );
00021 
00022         <span class="keywordtype">void</span> <a class="code" href="classMPBHeightMap.html#a3">initLightmap</a>(      <span class="keywordtype">char</span>* lightmapFile,
00023                                                                 <a class="code" href="classMPBVector.html">MPBVector</a> vectorToSun   );
00024         <span class="keywordtype">void</span> <a class="code" href="classMPBHeightMap.html#a4">plotVertex</a>( <span class="keywordtype">int</span> column, <span class="keywordtype">int</span> row ) <span class="keyword">const</span>;
00025         <span class="keywordtype">void</span> <a class="code" href="classMPBHeightMap.html#a4">plotVertex</a>( <span class="keywordtype">int</span> column, <span class="keywordtype">int</span> row, <span class="keywordtype">double</span> y ) <span class="keyword">const</span>;
00026         <span class="keywordtype">void</span> <a class="code" href="classMPBHeightMap.html#a6">draw</a>();
00027 
<a name="l00028"></a><a class="code" href="classMPBHeightMap.html#a7">00028</a>         <span class="keywordtype">double</span> <a class="code" href="classMPBHeightMap.html#a7">getHeight</a>() { <span class="keywordflow">return</span> m_height; }
00029         <span class="keywordtype">int</span> <a class="code" href="classMPBHeightMap.html#a8">getPlaneIndex</a>( <span class="keywordtype">double</span> xPos, <span class="keywordtype">double</span> zPos ) <span class="keyword">const</span>;
00030         <a class="code" href="classPlane.html">Plane</a>* <a class="code" href="classMPBHeightMap.html#a9">getPlane</a>( <span class="keywordtype">double</span> xPos, <span class="keywordtype">double</span> zPos ) <span class="keyword">const</span>;
00031         <span class="keywordtype">double</span> <a class="code" href="classMPBHeightMap.html#a7">getHeight</a>( <span class="keywordtype">double</span> xPos, <span class="keywordtype">double</span> zPos ) <span class="keyword">const</span>;
<a name="l00032"></a><a class="code" href="classMPBHeightMap.html#a11">00032</a>         <span class="keywordtype">int</span> <a class="code" href="classMPBHeightMap.html#a11">getWidth</a>() { <span class="keywordflow">return</span> m_width; }
<a name="l00033"></a><a class="code" href="classMPBHeightMap.html#a12">00033</a>         <span class="keywordtype">double</span> <a class="code" href="classMPBHeightMap.html#a12">getScaleXZ</a>() { <span class="keywordflow">return</span> m_scaleXZ; }
<a name="l00034"></a><a class="code" href="classMPBHeightMap.html#a13">00034</a>         <span class="keywordtype">double</span> <a class="code" href="classMPBHeightMap.html#a13">getScaleY</a>() { <span class="keywordflow">return</span> m_scaleY; }
<a name="l00035"></a><a class="code" href="classMPBHeightMap.html#a14">00035</a>         <span class="keywordtype">double</span> <a class="code" href="classMPBHeightMap.html#a14">getMaxX</a>() { <span class="keywordflow">return</span> m_width * m_scaleXZ; }
00036         <span class="keywordtype">void</span> <a class="code" href="classMPBHeightMap.html#a15">getAABB</a>( <a class="code" href="classMPBAABB.html">MPBAABB</a>&amp; aabb );
00037         <span class="keywordtype">void</span> <a class="code" href="classMPBHeightMap.html#a16">getPlanes</a>( <span class="keyword">const</span> <a class="code" href="classMPBAABB.html">MPBAABB</a>&amp; moveBox, set&lt;Plane*&gt;&amp; planeSet );
00038         <span class="keywordtype">bool</span> <a class="code" href="classMPBHeightMap.html#a17">getPenetrationPoint</a>( <a class="code" href="classMPBVector.html">MPBVector</a>&amp; point ) <span class="keyword">const</span>;
<a name="l00039"></a><a class="code" href="classMPBHeightMap.html#a18">00039</a>         <span class="keywordtype">void</span> <a class="code" href="classMPBHeightMap.html#a18">setDraw</a>( <span class="keywordtype">bool</span> b ) { m_draw = b; }
00040         <span class="keywordtype">double</span> <a class="code" href="classMPBHeightMap.html#a19">findHighestPoint</a>( <a class="code" href="classMPBVector.html">MPBVector</a> LL, <a class="code" href="classMPBVector.html">MPBVector</a> LR, <a class="code" href="classMPBVector.html">MPBVector</a> UR, <a class="code" href="classMPBVector.html">MPBVector</a> UL ) <span class="keyword">const</span>;
00041         <span class="keywordtype">double</span> <a class="code" href="classMPBHeightMap.html#a19">findHighestPoint</a>( <span class="keywordtype">double</span> x, <span class="keywordtype">double</span> z, <span class="keywordtype">double</span> width, <span class="keywordtype">double</span> depth ) <span class="keyword">const</span>;
00042 
<a name="l00043"></a><a class="code" href="classMPBHeightMap.html#o0">00043</a>         <span class="keywordtype">int</span>                                                             <a class="code" href="classMPBHeightMap.html#o0">m_trianglesRendered</a>;
00044 
00045 <span class="keyword">private</span>:
00046 
00047         <a class="code" href="classPlane.html">Plane</a>*                                                  m_planes[2];
00048         <span class="keywordtype">int</span>                                                             m_width;
00049         <span class="keywordtype">int</span>                                                             m_height;
00050         <span class="keywordtype">double</span> m_scaleXZ;               <span class="comment">// number of points between bitmap pixels</span>
00051         <span class="keywordtype">double</span> m_scaleY;                <span class="comment">// number of points between bitmap pixel values (height=0-255 * scaleY)</span>
00052         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>*                                                           m_heights;
00053         <span class="keywordtype">double</span>*                                                 m_scaledHeights;
00054 
00055         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>                                                            mapValue( BYTE* <span class="keyword">const</span>&amp; array, <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> column ) <span class="keyword">const</span>;
00056         <span class="keywordtype">double</span>                                                  scaledHeightValue( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> column ) <span class="keyword">const</span>;
00057         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>                                                            heightValue( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> column ) <span class="keyword">const</span>;
00058         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>                                                            lightValue( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> column ) <span class="keyword">const</span>;
00059         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>                                                            redValue( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> column ) <span class="keyword">const</span>;
00060         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>                                                            greenValue( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> column ) <span class="keyword">const</span>;
00061         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>                                                            blueValue( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> column ) <span class="keyword">const</span>;
00062         <span class="keywordtype">int</span>                                                             getIndex( <span class="keywordtype">int</span> row, <span class="keywordtype">int</span> column ) <span class="keyword">const</span>;
00063 
00064         <span class="keywordtype">char</span>                                                            m_texture[MAX_PATH];
00065         <span class="keywordtype">char</span>                                                            m_lightMap[MAX_PATH];
00066 
00067         <span class="keywordtype">double</span>*                                                 m_startHeights;
00068         <span class="keywordtype">double</span>*                                                 m_morphs;
00069         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>*                                                           m_lightValues;
00070         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>*                                                           m_reds;
00071         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>*                                                           m_greens;
00072         <a class="code" href="MPBLibrary_8h.html#a1">BYTE</a>*                                                           m_blues;
00073         <a class="code" href="classMPBVector.html">MPBVector</a>*                                              m_normals;
00074         GLuint                                                  m_displayList;
00075 
00076         <a class="code" href="classMPBTriangleBinaryTreeNode.html">MPBTriangleBinaryTreeNode</a>* m_leftRootNode;
00077         <a class="code" href="classMPBTriangleBinaryTreeNode.html">MPBTriangleBinaryTreeNode</a>* m_rightRootNode;
00078         <a class="code" href="classMPBTriangleBinaryTreeNode.html">MPBTriangleBinaryTreeNode</a>*      m_triBinNodes;
00079         <span class="keywordtype">int</span>                                                             m_triBinNodesIndex;
00080         <span class="keywordtype">int</span>                                                             m_recursionDepth;
00081         <span class="keywordtype">int</span>                                                             m_maxRecursionDepth;
00082         set&lt;Plane*&gt;                                             m_planeSetDraw;
00083         <span class="keywordtype">bool</span>                                                            m_draw;
00084 
00085         <span class="keywordtype">void</span> tessellateTriBintreeNode(  <a class="code" href="classMPBTriangleBinaryTreeNode.html">MPBTriangleBinaryTreeNode</a>* node,
00086                                                                                                 POINT pointApex,
00087                                                                                                 POINT pointLeft,
00088                                                                                                 POINT pointRight<span class="comment">/*,</span>
00089 <span class="comment">                                                                                                double apexStartHeight*/</span>        );
00090 
00091         <span class="keywordtype">void</span> renderTriBintreeNode(      <a class="code" href="classMPBTriangleBinaryTreeNode.html">MPBTriangleBinaryTreeNode</a>* node,
00092                                                                                 POINT pointApex,
00093                                                                                 POINT pointLeft,
00094                                                                                 POINT pointRight        );
00095 
00096         <span class="keywordtype">void</span> splitTriBintreeNode( <a class="code" href="classMPBTriangleBinaryTreeNode.html">MPBTriangleBinaryTreeNode</a>* node );
00097         <a class="code" href="classMPBTriangleBinaryTreeNode.html">MPBTriangleBinaryTreeNode</a>* allocateTriBintreeNode();
00098 };
00099 
00100 
00101 <span class="preprocessor">#endif</span>
00102 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Sat Mar 13 22:08:19 2004 for MPBLibrary by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
