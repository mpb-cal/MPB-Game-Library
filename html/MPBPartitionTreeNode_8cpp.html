<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>MPBLibrary: MPBPartitionTreeNode.cpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Compound&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Compound&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<h1>MPBPartitionTreeNode.cpp File Reference</h1><code>#include "<a class="el" href="MPBGlobal_8h-source.html">MPBGlobal.h</a>"</code><br>
<code>#include "<a class="el" href="MPBProfile_8h-source.html">MPBProfile.h</a>"</code><br>
<code>#include "<a class="el" href="MPBOpenGL_8h-source.html">MPBOpenGL.h</a>"</code><br>
<code>#include "<a class="el" href="MPBPartitionTreeNode_8h-source.html">MPBPartitionTreeNode.h</a>"</code><br>
<code>#include "<a class="el" href="MPBShape_8h-source.html">MPBShape.h</a>"</code><br>
<code>#include "<a class="el" href="MPBTexturedPlane_8h-source.html">MPBTexturedPlane.h</a>"</code><br>
<code>#include "<a class="el" href="MPBGameEntities_8h-source.html">MPBGameEntities.h</a>"</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td></td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a5">if</a> (shapes&lt;=s_maxShapes)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a6">if</a> (m_type==OCTREE)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a7">SET_LOOP</a> (<a class="el" href="MPBGameEntities_8cpp.html#a4">shapeSet</a>, <a class="el" href="classMPBShape.html">MPBShape</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a8">for</a> (i=0;i&lt; <a class="el" href="MPBPartitionTreeNode_8cpp.html#a1">children</a>;i++)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a9">if</a> (m_children.size()==0) m_intersected=<a class="el" href="MPBShape_8cpp.html#a8">true</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a10">VECTOR_LOOP</a> (m_children, <a class="el" href="classMPBPartitionTreeNode.html">MPBPartitionTreeNode</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>bool&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a11">SortChildrenFunc</a> (<a class="el" href="classMPBPartitionTreeNode.html">MPBPartitionTreeNode</a> *a, <a class="el" href="classMPBPartitionTreeNode.html">MPBPartitionTreeNode</a> *b)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a12">if</a> (backToFront)</td></tr>

<tr><td colspan=2><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align=right valign=top>goto&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a0">leaveNode</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>int&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a1">children</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top><a class="el" href="MPBPartitionTreeNode_8cpp.html#a0">leaveNode</a>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a2">__pad0__</a></td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>i&lt; depth;i++) writeLog("\t");writeLog("end node:");shapes=m_shapes.size();sprintf(<a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>,<br>
"%d shapes,", shapes);writeLog();char buf&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a3">getAABB</a> [100];m_aabb.getCenter().toString(buf);sprintf(<a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>,"center:%<a class="el" href="MPBRigidBodyBox_8cpp.html#a0">s</a>,", buf);writeLog();sprintf(<a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>,"width:%f,", m_aabb.getWidth());writeLog();sprintf(<a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>,"height:%f,", m_aabb.getHeight());writeLog();sprintf(<a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>,"depth:%f,", m_aabb.getDepth());writeLog();writeLog("\n");depth--;}void MPBPartitionTreeNode::intersectBox(const <a class="el" href="classMPBAABB.html">MPBAABB</a> &amp;<a class="el" href="MPBCollision_8cpp.html#a5">moveBox</a>, set&lt; <a class="el" href="classMPBTexturedPlane.html">MPBTexturedPlane</a> * &gt; &amp;intersectedPlanes){PROFILE_START("PartitionTreeNode::intersectBox");m_intersected=<a class="el" href="MPBShape_8cpp.html#a5">false</a>;if(!<a class="el" href="MPBCollision_8cpp.html#a5">moveBox</a>.intersects(m_aabb)) <a class="el" href="MPBConsoleWindow_8cpp.html#a2">return</a>;VECTOR_LOOP(m_shapes, <a class="el" href="classMPBShape.html">MPBShape</a> *){if(<a class="el" href="MPBCollision_8cpp.html#a5">moveBox</a>.intersects((*itr)-&gt;()))(*itr)-&gt;getPlanes(intersectedPlanes)</td></tr>

<tr><td class="memItemLeft" nowrap align=right valign=top>&nbsp;</td><td class="memItemRight" valign=bottom><a class="el" href="MPBPartitionTreeNode_8cpp.html#a4">s_drawDepth</a></td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a name="a8" doxytag="MPBPartitionTreeNode.cpp::for"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> for </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a12" doxytag="MPBPartitionTreeNode.cpp::if"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> if </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">backToFront&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a9" doxytag="MPBPartitionTreeNode.cpp::if"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> if </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">m_children.&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>size</em>() = =0          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a6" doxytag="MPBPartitionTreeNode.cpp::if"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> else if </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">m_type&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> = = OCTREE          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a5" doxytag="MPBPartitionTreeNode.cpp::if"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> if </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">shapes&lt;=&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>s_maxShapes</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a7" doxytag="MPBPartitionTreeNode.cpp::SET_LOOP"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> SET_LOOP </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="MPBGameEntities_8cpp.html#a4">shapeSet</a>&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classMPBShape.html">MPBShape</a> *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a11" doxytag="MPBPartitionTreeNode.cpp::SortChildrenFunc"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool SortChildrenFunc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classMPBPartitionTreeNode.html">MPBPartitionTreeNode</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>a</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classMPBPartitionTreeNode.html">MPBPartitionTreeNode</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a10" doxytag="MPBPartitionTreeNode.cpp::VECTOR_LOOP"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> VECTOR_LOOP </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">m_children&nbsp;</td>
          <td class="mdname" nowrap>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classMPBPartitionTreeNode.html">MPBPartitionTreeNode</a> *&nbsp;</td>
          <td class="mdname" nowrap></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a name="a2" doxytag="MPBPartitionTreeNode.cpp::__pad0__"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="MPBPartitionTreeNode_8cpp.html#a0">leaveNode</a> <a class="el" href="MPBPartitionTreeNode_8cpp.html#a2">__pad0__</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="MPBPartitionTreeNode.cpp::children"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int <a class="el" href="MPBPartitionTreeNode_8cpp.html#a1">children</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a3" doxytag="MPBPartitionTreeNode.cpp::getAABB"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> i&lt;depth; i++) writeLog( "\t" ); writeLog( "end node: " ); shapes = m_shapes.size(); sprintf( <a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>, "%d shapes, ", shapes ); writeLog(); char buf <a class="el" href="MPBPartitionTreeNode_8cpp.html#a3">getAABB</a>[100]; m_aabb.getCenter().toString( buf ); sprintf( <a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>, "center: %<a class="el" href="MPBRigidBodyBox_8cpp.html#a0">s</a>, ", buf ); writeLog(); sprintf( <a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>, "width: %f, ", m_aabb.getWidth() ); writeLog(); sprintf( <a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>, "height: %f, ", m_aabb.getHeight() ); writeLog(); sprintf( <a class="el" href="MPBGlobal_8h.html#a2">g_logBuf</a>, "depth: %f, ", m_aabb.getDepth() ); writeLog(); writeLog( "\n" ); depth--;}void MPBPartitionTreeNode::intersectBox( const <a class="el" href="classMPBAABB.html">MPBAABB</a>&amp; <a class="el" href="MPBCollision_8cpp.html#a5">moveBox</a>, set&lt;<a class="el" href="classMPBTexturedPlane.html">MPBTexturedPlane</a>*&gt;&amp; intersectedPlanes ){ PROFILE_START( "PartitionTreeNode::intersectBox" ); m_intersected = <a class="el" href="MPBShape_8cpp.html#a5">false</a>; if (!<a class="el" href="MPBCollision_8cpp.html#a5">moveBox</a>.intersects( m_aabb )) <a class="el" href="MPBConsoleWindow_8cpp.html#a2">return</a>; VECTOR_LOOP( m_shapes, <a class="el" href="classMPBShape.html">MPBShape</a>* ) { if (<a class="el" href="MPBCollision_8cpp.html#a5">moveBox</a>.intersects( (*itr)-&gt;() )) (*itr)-&gt;getPlanes( intersectedPlanes )
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a0" doxytag="MPBPartitionTreeNode.cpp::leaveNode"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> goto <a class="el" href="MPBPartitionTreeNode_8cpp.html#a0">leaveNode</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a4" doxytag="MPBPartitionTreeNode.cpp::s_drawDepth"></a><p>
<table class="mdTable" width="100%" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="MPBPartitionTreeNode_8cpp.html#a4">s_drawDepth</a>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sat Mar 13 22:08:20 2004 for MPBLibrary by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.2 </small></address>
</body>
</html>
